<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coockie Clicker</title>
    <link rel="stylesheet" href="src/css/style.css">
    <script src="src/js/script.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
</head>
<body>
    <span id="event">
    </span>
    <div class="boxes">
        <div class="sections">
            
        </div>
        <div class="sections">
            <div id="money" class="color">0</div>
            <div class="div-portal">
                <img id="clickEvent" class="portal" src="src/images/portal.png">
            </div>
        </div>
        <div class="sections">
            <h2 class="market-title">Market Dimensionnel</h2>
            <div class="box-clicker" id="box-clicker">
                
            </div>
        </div>
    </div>
</body>
<script>
    const user = new User("Alfred");
    const portalGun = new PortalGun("Pisto-Portail", "portalgun", 5, 1, false);
    const jerry = new Jerry("Jerry Smith", "jerry", 30, 2, true);  
    const beth = new Beth("Beth Smith", "beth", 150, 8, true);  
    const summer = new Summer("Summer Smith", "summer", 1000, 15, true);  
    const morty = new Morty("Morty Smith", "morty",5000, 30, true);  
    const rick = new Rick("Rick Sanchez", "rick",25000, 80, true);

    const heroes = [
        portalGun,
        jerry,
        beth,
        summer,
        morty,
        rick
    ];

    for (const hero of heroes) {
        let divclicker = document.createElement('div');
        divclicker.className = "color clicker";

        let divitems = document.createElement("div");
        divitems.className = "div-items";

        let divitems_first_part = document.createElement("div");
        divitems_first_part.className = "divitems-first-part";

        let divitems_second_part = document.createElement("div");
        divitems_second_part.className = "divitems-second-part";

        let name = document.createElement("span");
        name.innerHTML = hero.name;
        name.className = "items-name";

        let level = document.createElement("span");
        level.id = hero+"level";
        level.className = "level"

        let price = document.createElement("span");
        price.id = hero+"price";

        let earn = document.createElement("span");
        earn.id = hero+"earn";
        earn.className = "earn"

        let button = document.createElement("button");
        button.id = hero;
        button.innerHTML = "Améliorer ↑";
        button.className = "button"

        let bonuses = document.createElement("div");
        bonuses.className = "bonus-box"

        let firstBonus = document.createElement("span");
        firstBonus.className = "bonus"
        firstBonus.id = hero + "firstbonus"

        let secondBonus = document.createElement("span");
        secondBonus.className = "bonus"
        secondBonus.id = hero + "secondbonus"

        let thirdBonus = document.createElement("span");
        thirdBonus.className = "bonus"
        thirdBonus.id = hero + "thirdbonus"

        let divimage = document.createElement("div");
        divimage.className = "size-item-image";
        let image = document.createElement("img");
        image.src = hero.image;
        image.className = "items-img";

        bonuses.appendChild(firstBonus);
        bonuses.appendChild(secondBonus);
        bonuses.appendChild(thirdBonus);

        divimage.appendChild(image);

        divitems_first_part.appendChild(name);
        divitems_first_part.appendChild(bonuses);
        divitems_first_part.appendChild(earn);

        divitems_second_part.appendChild(level);
        button.appendChild(price);
        divitems_second_part.appendChild(button);

        divitems.appendChild(divitems_first_part);
        divitems.appendChild(divitems_second_part);

        divclicker.appendChild(divimage);
        divclicker.appendChild(divitems);

        $("#box-clicker").append(divclicker);
    }

    setInterval(() => {

        // Actualiser l'argent
        $("#money").html(user.getMoney);

        for (const hero of heroes) {
            $("#"+ hero +"level").html("Niveau : " + Math.round(hero.level));
            $("#" + hero + "price").html(Math.round(hero.price));
            $("#" + hero + "earn").html("Revenus : " + Math.round(hero.earnings / (hero.timing_autoclick / 1000)));
        }
    }, 10);

    $("#clickEvent").click(() => portalGun.click(user));

    $("#portalgun").click(() => portalGun.increaseLevel(user));
    $("#jerry").click(() => { jerry.increaseLevel(user); jerry.startAutoclick(user); });
    $("#beth").click(() => { beth.increaseLevel(user); beth.startAutoclick(user); });
    $("#summer").click(() => { summer.increaseLevel(user); summer.startAutoclick(user); });
    $("#morty").click(() => { morty.increaseLevel(user); morty.startAutoclick(user); });
    $("#rick").click(() => { rick.increaseLevel(user); rick.startAutoclick(user); });

    for (hero of heroes) {
        $("#" + hero + "firstbonus").click(() => { hero.first_bonus(user) });
        $("#" + hero + "secondbonus").click(() => { hero.second_bonus(user) });
        $("#" + hero + "thirdbonus").click(() => { hero.third_bonus(user) });
    }
    

    Event.mr_larbin();

    
</script>
</html>